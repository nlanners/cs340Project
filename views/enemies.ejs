<h2>Enemies</h2>

<!-- Search Bar -->
<div class="container-fluid">
    <form action='/enemies' method='POST'>
        <fieldset>
            <div class="row mb-3">
                <div class="col-4">
                    <input type="text" class="form-control" placeholder="Search Enemies by Name..." id='name' name="name">
                </div>
                <div class="col-2">
                    <button type="submit" class="btn btn-success" id='search'>Search</button>
                </div>
            </div>
        </fieldset>
    </form>
</div>

<!-- Enemies Table -->
<table class="table caption-top table-striped table-hover">
    <caption>Current Enemies</caption>
    <thead>
	    <tr>
	        <th>Enemy ID</th>
	        <th>Name</th>
	        <th>Health</th>
	        <th>Strength</th>
	        <th>Item ID</th>
	        <th>Drop Chance</th>
	        <th>Money</th>
	    </tr>
    </thead>
    <tbody>
        <% results.forEach(function(enemy) { %>
            <tr>
                <td> <%= enemy.enemyID %> </td>
                <td> <%= enemy.name %> </td>
                <td> <%= enemy.health %> </td>
                <td> <%= enemy.strength %> </td>
                <td> <%= enemy.itemID %> </td>
                <td> <%= enemy.dropChance %> </td>
                <td> <%= enemy.money %> </td>
                <!--
                <% if (enemy.itemID) { %>
                    <td> <%= enemy.itemID %> </td>
                <% } else { %>
                    <td>null<td>
                <% } %>

                <% if (enemy.dropChance) { %>
                    <td> <%= enemy.dropChance %> </td>
                <% } else { %>
                    <td>null<td>
                <% } %>

                <% if (enemy.money) { %>
                    <td> <%= enemy.money %> </td>
                <% } else { %>
                    <td>null<td>
                <% } %>
                -->
            </tr>
        <% }) %>
    </tbody>
</table>

<!--
<script>
    document.getElementById('search').addEventListener('click', async function(event){
            var req = new XMLHttpRequest();
            // CREATING JSON OBJECT TO SEND AS POST REQUEST
            var payload = {name:null};
            payload.name = document.getElementById('name').value;
            req.open('POST', '/enemies');
            req.setRequestHeader('Content-Type', 'application/json');

            // PARSING RESPONSE SENT FROM SERVER
            req.addEventListener('load', function() {
                if(req.status >= 200 && req.status < 400){
                    console.log('req sent')
                }
            });

            // SENDING JSON STRING AS POST REQUEST
            req.send(JSON.stringify(payload));
            event.preventDefault()
        })
</script>
-->